<!-- Order Statistics Pie Chart -->
<div class="dashboard-card">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h5 class="chart-title">Statut des Commandes</h5>
            <div class="dropdown">
                <button type="button" class="action-btn" data-bs-toggle="dropdown">
                    <i class="bx bx-dots-vertical-rounded"></i>
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="{{ path('admin_order_index') }}"><i class="bx bx-list-ul"></i> Voir toutes les commandes</a></li>
                </ul>
            </div>
        </div>
        <div class="pie-chart-container" id="orderPieChart" style="height: 350px;">
            <!-- D3.js will render the chart here -->
        </div>
    </div>
</div>

<!-- Tooltip container -->
<div class="pie-tooltip" id="pieTooltip"></div>

{% block javascripts %}
<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const orderStats = {{ orderStats|json_encode|raw }};
    createOrderPieChart('orderPieChart', orderStats);
});
</script>
{% endblock %}
