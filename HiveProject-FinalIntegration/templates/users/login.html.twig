{% extends 'base.html.twig' %}

{% block title %}Sign In - HIVE{% endblock %}

{% block body %}
<div class="login-container d-flex align-items-center justify-content-center">
    <div class="login-card shadow-lg p-4 rounded-4 bg-dark-subtle">
        <div class="text-center mb-4">
            <img src="{{ asset('images/logo.png') }}" alt="HIVE Logo" style="width: 80px;">
            <h2 class="mt-2 mb-1 text-primary">Welcome Back!</h2>
            <p class="text-muted">Sign in to your HIVE account</p>
        </div>
        {{ form_start(loginForm, {'attr': {'novalidate': 'novalidate'}}) }}
            <div class="form-group mb-3">
                {{ form_label(loginForm.email, 'Email', {'label_attr': {'class': 'form-label'}}) }}
                {{ form_widget(loginForm.email, {
                    'attr': {
                        'class': 'form-control' ~ (form_errors(loginForm.email) ? ' is-invalid' : ''),
                        'placeholder': 'Enter your email',
                        'autocomplete': 'username'
                    }
                }) }}
                <div class="invalid-feedback">
                    {{ form_errors(loginForm.email) }}
                </div>
            </div>
            <div class="form-group mb-3">
                {{ form_label(loginForm.password_hash, 'Password', {'label_attr': {'class': 'form-label'}}) }}
                {{ form_widget(loginForm.password_hash, {
                    'attr': {
                        'class': 'form-control' ~ (form_errors(loginForm.password_hash) ? ' is-invalid' : ''),
                        'placeholder': 'Enter your password',
                        'type': 'password',
                        'autocomplete': 'current-password'
                    }
                }) }}
                <div class="invalid-feedback">
                    {{ form_errors(loginForm.password_hash) }}
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <label class="form-check-label">
                    <input type="checkbox" name="remember_me" class="form-check-input"> Remember Me
                </label>
                <a href="{{ path('app_forgot_password_request') }}" class="text-primary small">Forgot Password?</a>
            </div>
            <button type="submit" class="btn btn-primary w-100 py-2 mb-2">Sign In</button>
            <div class="text-center my-2 text-muted">or</div>
            <a href="{{ path('connect_google_start') }}" class="btn btn-outline-danger w-100 mb-2">
                <i class="fab fa-google me-2"></i> Sign in with Google
            </a>
            <a href="{{ path('connect_facebook') }}" class="btn btn-outline-primary w-100 mb-2">
                <i class="fab fa-facebook-f me-2"></i> Sign in with Facebook
            </a>
            <div class="text-center mt-3">
                <span class="text-light">Don't have an account?</span>
                <a href="{{ path('app_register') }}" class="text-primary">Create Account</a>
            </div>
        {{ form_end(loginForm) }}
        {% for flash_error in app.flashes('loginEroor') %}
            <div class="alert alert-danger mt-3">{{ flash_error }}</div>
        {% endfor %}
        {% for message in app.flashes('success') %}
            <div class="alert alert-success mt-3">{{ message }}</div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block stylesheets %}
{{ parent() }}
<style>
.login-container {
    min-height: 100vh;
    background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('{{ asset('img/carousel-1.jpg') }}') center/cover no-repeat;
}
.login-card {
    max-width: 400px;
    width: 100%;
    background: rgba(33, 37, 41, 0.97);
    border-radius: 18px;
    box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37);
    margin: 40px auto;
}
.btn-primary, .btn-outline-primary, .btn-outline-danger {
    font-weight: 600;
    border-radius: 8px;
}
.form-control {
    background: rgba(255,255,255,0.12);
    color: #fff;
    border: 1px solid #444;
}
.form-control:focus {
    background: rgba(255,255,255,0.18);
    color: #fff;
    border-color: var(--primary);
    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
}
@media (max-width: 576px) {
    .login-card { padding: 20px; }
}
</style>
{% endblock %}